<div class="container-fluid">
  <section class="col-lg-10 col-md-10">
    <md-input-container>
      <label>Chauffeurs</label>
      <md-select ng-model="selectedChauffeur" md-on-close="clearSearchTerm()" data-md-container-class="selectdemoSelectHeader">
        <md-select-header class="demo-select-header">
          <input ng-model="searchTerm" type="search" placeholder="Chercher un chauffeur" class="demo-header-searchbox _md-text">
        </md-select-header>
        <md-optgroup label="Chauffeurs">
          <md-option ng-value="chauffeur" ng-repeat="chauffeur in chauffeurs |
          filter:searchTerm">{{chauffeur.SALCODE}}</md-option>
        </md-optgroup>
      </md-select>
    </md-input-container>
    <md-checkbox ng-model="cb1" aria-label="Checkbox 1" ng-change="getPositionsLivraisons(selectedChauffeur,cb1,date)" ng-show="selectedChauffeur != null">
      Livraisons
    </md-checkbox>
    <md-checkbox  ng-model="cb2" aria-label="Checkbox 2" ng-change="getTrajetLivraison(selectedChauffeur,cb2)" ng-show="selectedChauffeur != null">
      Trajet
    </md-checkbox>
    <md-checkbox ng-model="cb3" aria-label="Checkbox 3" ng-change="getLastPosOther(selectedChauffeur,cb3)" ng-show="selectedChauffeur != null">
      Autres chauffeurs
    </md-checkbox>
    <md-datepicker ng-model="date" md-placeholder="Enter date" ng-show="selectedChauffeur != null" ng-change="getPositionsLivraisons(selectedChauffeur,cb1,date)"></md-datepicker>
    <!-- | filter:{showMap:true } -->
    <md-button class="md-icon-button md-raised" ng-show="selectedChauffeur != null" aria-label="recadre" ng-click="recadre()">
      <md-icon md-svg-icon="images/ICO/ico_fullscreen.svg"></md-icon>
    </md-button>
    <md-button class="md-icon-button md-raised" ng-show="selectedChauffeur != null" aria-label="refresh" ng-click="refresh()">
      <md-icon md-svg-icon="images/ICO/ico_refresh.svg"></md-icon>
    </md-button>
    <div class="loading" ng-show="loading">
      <md-progress-circular md-mode="indeterminate"></md-progress-circular>
      <span>Loading predict</span>
    </div>
    <ui-gmap-google-map center='map.center' zoom='map.zoom' control='map.control' bounds='bounds' pan='true'>
      <ui-gmap-map-control position="top-right">
        <div class="legendebg" ng-controller="LegendCtrl">
          <a class="legende" ng-click="toggle()">
            <h5>LÃ©gende</h5>
            <ul class="visible">
              <li><img src="images/ico/ico_truck.svg" alt="" width="40px"/>Position du chauffeur</li>
              <li><img src="images/ico/ico_liv_v.svg" alt="" width="40px"/>Livraisons conforme</li>
              <li><img src="images/ico/ico_ram_v.svg" alt="" width="40px"/>Ramasse conforme</li>
              <li><img src="images/ico/ico_liv_a.svg" alt="" width="40px"/>Livraison non-conforme</li>
              <li><img src="images/ico/ico_ram_a.svg" alt="" width="40px"/>Ramasse non-conforme</li>
              <li><img src="images/ico/ico_liv_v_m.svg" alt="" width="40px"/>Regroupement de position</li>
            </ul>
          </a>
        </div>
      </ui-gmap-map-control>
      <ui-gmap-marker coords="map.markerHome.coords" options="map.markerHome.options" idkey="10"></ui-gmap-marker>
      <ui-gmap-marker ng-repeat="m in map.lastPos.coords" idkey="11" coords="m" options="map.lastPos.options"></ui-gmap-marker>
      <ui-gmap-marker ng-repeat="mk in otherLastPos" idkey="mk.id" coords="mk.coords" options="mk.options"></ui-gmap-marker>
      <ui-gmap-markers models="markers" coords="'coords'" icon="'options.icon'" type="cluster" doCluster="true" clusterOptions="clusterOptions" click="test(id)"></ui-gmap-markers>
      <ui-gmap-polyline ng-repeat="p in polylines" path="p.path" stroke="p.stroke" visible='p.visible' geodesic='p.geodesic' fit="false" editable="p.editable" draggable="p.draggable" icons='p.icons'></ui-gmap-polyline>
    </ui-gmap-google-map>
  </section>
  <section class="col-lg-2 col-md-2 aside">
    <v-accordion class="vAccordion--default" id="my-accordion" control="accordion">
      <v-pane ng-repeat="m in markers" expanded="pane.isExpanded" id="{{ ::m.id }}" ng-show="m.showList" aria-controls="{{ m.id }}" ng-click="setCenter(pane.isExpanded,m.coords)">
        <v-pane-header>
          <h5 ng-class="m.color" ng-bind-html="(m.infowindows.info.ico)+ (m.infowindows.info.num)"></h5>
        </v-pane-header>
        <v-pane-content>
          <div ng-bind-html="m.infowindows.info.data"></div>
        </v-pane-content>
      </v-pane>
    </v-accordion>
  </section>
</div>
